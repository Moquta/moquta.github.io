<main
  class="grid-container p-3"
  style="--color-primary:{{ settings.MasjidPrimaryColor }}; 
  --color-secondary:{{ settings.MasjidSecondaryColor }}"
>
  <section class="header p-4 shadow-2">
    <img
      class="header__masjid-logo"
      [src]="settings.MasjidLogoSrc"
      alt="Masjid Logo"
      routerLink="/settings"
    />
    <div class="header__masjid-name">
      <span class="text-5xl font-bold">{{ settings.MasjidName }}</span>
      <span class="text-5xl text-black-alpha-60">
        {{ settings.MasjidSubheader }}
      </span>
    </div>
  </section>

  <section class="date-g p-4 shadow-2">
    <ng-container *ngIf="prayerData; else loading">
      <span class="text-6xl">{{ prayerData.date.gregorian.month.en }}</span>
      <span class="text-6xl">{{ prayerData.date.gregorian.day }}</span>
      <span class="text-6xl">{{ prayerData.date.gregorian.year }}</span>
    </ng-container>
  </section>

  <section class="day p-4 shadow-2">
    <span class="text-6xl">{{ now | date : "EEEE" }}</span>
  </section>

  <section class="time p-4 shadow-2">
    <span class="text-6xl">{{ now | date : "h:mm:ss a" }}</span>
  </section>

  <section class="date-h p-4 shadow-2">
    <ng-container *ngIf="prayerData; else loading">
      <span class="text-5xl">{{ prayerData.date.hijri.month.en | titlecase}}</span>
      <span class="text-6xl">{{ prayerData.date.hijri.day }}</span>
      <span class="text-6xl">{{ prayerData.date.hijri.year }}</span>
    </ng-container>
  </section>

  <section class="prayers p-4 shadow-2">
    <ng-container *ngIf="prayerData; else loading">
      <div class="prayers__row">
        <span>Prayer</span>
        <span>Adhan</span>
        <span>Iqamah</span>
      </div>
      <div
        class="prayers__row shadow-3"
        [ngClass]="{
          'prayers__row--highlighted shadow-7': nextPrayerIndex === 0
        }"
      >
        <span>Fajr</span>
        <span>{{ formatAdhanTime(prayerData.timings.Fajr) }}</span>
        <span>
          {{
            calcIqamaTime(prayerData.timings.Fajr, settings.IqamaTimings.Fajr)
          }}
        </span>
      </div>
      <div
        class="prayers__row shadow-3"
        [ngClass]="{
          'prayers__row--highlighted shadow-7': nextPrayerIndex === 1
        }"
      >
        <span>Sunrise</span>
        <span>{{ formatAdhanTime(prayerData.timings.Sunrise) }}</span>
      </div>
      <div
        class="prayers__row shadow-3"
        [ngClass]="{
          'prayers__row--highlighted shadow-7': nextPrayerIndex === 2
        }"
      >
        <span>Dhuhr</span>
        <span>{{ formatAdhanTime(prayerData.timings.Dhuhr) }}</span>
        <span>
          {{
            calcIqamaTime(prayerData.timings.Dhuhr, settings.IqamaTimings.Dhuhr)
          }}
        </span>
      </div>
      <div
        class="prayers__row shadow-3"
        [ngClass]="{
          'prayers__row--highlighted shadow-7': nextPrayerIndex === 3
        }"
      >
        <span>Asr</span>
        <span>{{ formatAdhanTime(prayerData.timings.Asr) }}</span>
        <span>
          {{ calcIqamaTime(prayerData.timings.Asr, settings.IqamaTimings.Asr) }}
        </span>
      </div>
      <div
        class="prayers__row shadow-3"
        [ngClass]="{
          'prayers__row--highlighted shadow-7': nextPrayerIndex === 4
        }"
      >
        <span>Maghrib</span>
        <span>{{ formatAdhanTime(prayerData.timings.Maghrib) }}</span>
        <span>
          {{
            calcIqamaTime(
              prayerData.timings.Maghrib,
              settings.IqamaTimings.Maghrib
            )
          }}
        </span>
      </div>
      <div
        class="prayers__row shadow-3"
        [ngClass]="{
          'prayers__row--highlighted shadow-7': nextPrayerIndex === 5
        }"
      >
        <span>Isha</span>
        <span>{{ formatAdhanTime(prayerData.timings.Isha) }}</span>
        <span>
          {{
            calcIqamaTime(prayerData.timings.Isha, settings.IqamaTimings.Isha)
          }}
        </span>
      </div>
    </ng-container>
  </section>

  <section
    class="additional-info p-4 shadow-2"
    [ngClass]="{
      'additional-info--highlighted': nextPrayerIndex === 5
    }"
  >
    <span *ngFor="let info of settings.AdditionalInfo" class="text-7xl">
      {{ info }}
    </span>
  </section>
</main>

<ng-template #loading>
  <div class="loading-spinner">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
